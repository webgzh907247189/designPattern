{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effectScope.ts", "../src/effect.ts", "../../shared/src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts", "../src/computed.ts", "../src/watch.ts", "../src/ref.ts"],
  "sourcesContent": ["export * from './effect'\n\nexport * from './reactive'\n\nexport * from './computed'\n\nexport * from './watch'\n\nexport * from './ref'\n\nexport * from './effectScope'\n\n// 1. \u5148\u901A\u8FC7 new Proxy \u5B9E\u73B0\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\n// 2. effect \u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21, \u628A\u6B63\u5728\u6267\u884C\u7684 effect \u4F5C\u4E3A\u5168\u5C40\u53D8\u91CF (activeEffect), \u6E32\u67D3\u7684\u65F6\u5019\u53D6\u503C, \u5728 get \u65B9\u6CD5\u4E2D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n// 3. weakMap -> {target\u5BF9\u8C61: Map{ \u5C5E\u6027\u503C: set(effect) } } \n// 4. \u7A0D\u540E\u7528\u6237\u6570\u636E\u53D8\u5316\uFF0C\u901A\u8FC7\u5BF9\u8C61\u5C5E\u6027\u6765\u67E5\u627E\u5BF9\u5E94\u7684 set effect \u96C6\u5408, \u627E\u5230 set \u91CC\u9762\u5B58\u8D2E\u7684 effects \u5168\u90E8\u6267\u884C", "export let activeEffectScope = null\n\nclass EffectScope{\n    active = true\n    effects = []\n    parent\n    scopes // \u6536\u96C6\u4F5C\u7528\u57DF\u7684\n    constructor(detached = false){\n\n        // \u72EC\u7ACB\u7684\u624D\u6267\u884C effectScope \u4F5C\u7528\u57DF\u6536\u96C6\n        if(!detached && activeEffectScope){\n            // \u5904\u7406 \u5728 effectScope.run \u91CC\u9762 \u7EE7\u7EED\u8C03\u7528 effectScope.run \u7684\u884C\u4E3A\n            (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this)\n        }\n    }\n    run(fn){\n        if(this.active){\n            try{\n                this.parent = activeEffectScope\n                activeEffectScope = this\n                return fn()\n            }catch{\n                activeEffectScope = this.parent\n                this.parent = null\n            }\n        }\n    }\n    stop(){\n        if(this.active){\n            for (let index = 0; index < this.effects.length; index++) {\n                const effect = this.effects[index];\n\n                // \u8BA9\u6BCF\u4E00\u4E2A\u5B58\u8D2E\u7684 effect \u5168\u90E8\u7EC8\u6B62\n                effect.stop()\n            }\n\n            // \u8BA9\u5916\u5C42\u7684 scope \u4E5F\u80FD\u63A7\u5236\u91CC\u5C42\u7684 scope\n            if(this.scopes){\n                for (let index = 0; index < this.scopes.length; index++) {\n                    const scope = this.scopes[index];\n                    scope.stop()\n                }\n            }\n\n            this.active = false\n        }\n    }\n}\n\nexport const effectScope = (detached) => {\n    return new EffectScope(detached)\n}\n\nexport const recordEffectScope = (effect) => {\n    if(activeEffectScope && activeEffectScope.active){\n        activeEffectScope.effects.push(effect)\n    }\n}", "import { recordEffectScope } from './effectScope'\n\n// \u6B64\u5904 \u5BFC\u51FA\u7684\u662F\u4E00\u4E2A \u503C\u7684\u5F15\u7528 (\u51FD\u6570\u6267\u884C\u7684\u8FD4\u56DE\u503C esm \u7684\u7279\u6027)\nexport let activeEffect = undefined\n\nconst cleanupEffect = (effect) => {\n    debugger\n    const { deps } = effect\n\n    deps.forEach(item => {\n        // item -> Set\n        // \u6B64\u5904\u7684 item \u7B49\u540C\u4E8E activeEffect.deps.push(depSet) \u91CC\u9762\u7684 depSet\n        // weakMap { obj: Map{ key: Set(effect) } }   ->   \u4E5F\u5C31\u662F  weakMap \u91CC\u9762 key \u5BF9\u5E94\u7684 Set\n        item.delete(effect) // \u89E3\u9664 effect\uFF0C\u91CD\u65B0\u8FDB\u884C \u4F9D\u8D56\u6536\u96C6\n    })\n    // for (let index = 0; index < deps.length; index++) {\n    //     const dep = deps[index];\n    //     dep.delete(effect)\n    // }\n\n    effect.deps.length = 0\n}\n\nexport class ReactiveEffect{\n    debugger\n    // effect \u8BB0\u5F55 \u5C5E\u6027 (\u5C5E\u6027\u4E5F\u8981\u8BB0\u5F55 effect)\n    public deps = []\n    public parent = null\n\n    public active = true // \u8FD9\u4E2A effect \u9ED8\u8BA4\u662F \u6FC0\u6D3B\u72B6\u6001\n    constructor(public fn, public scheduler){ // \u76F8\u5F53\u4E8E this.fn = fn\n        recordEffectScope(this)\n    }\n\n    run(){\n        // \u975E \u6FC0\u6D3B\u7684\u60C5\u51B5\uFF0C \u53EA\u8981\u6267\u884C\u51FD\u6570\uFF0C\u4E0D\u9700\u8981\u6536\u96C6\u4F9D\u8D56\n        if(!this.active){\n            return this.fn();\n        }\n\n        // effect(() => {\n        //     state.name;\n        //     effect(()=>{\n        //         state.age;\n        //     })\n        //     state.address;\n        // })\n        // \u7B2C\u4E00\u4E2A effect -> e1\n        // \u7B2C\u4E8C\u4E2A effect -> e2\n        // \u521D\u59CB\u5316 this.parent = null; activeEffect = e1 ,\u6267\u884C \u7B2C\u4E00\u4E2A effect cb\uFF0C \u63A5\u7740 \u6267\u884C \u7B2C\u4E8C\u4E2A effect \u7684 cb\n        // this.parent = e1; activeEffect = e2; \u6B64\u65F6 \u7B2C\u4E8C\u4E2A effect \u7684 cb \u6267\u884C\u5B8C\u6210\u3002 activeEffect = e1; this.parent = null;\n        // \u63A5\u7740\u56DE\u5230 finally \u6267\u884C\u903B\u8F91 activeEffect = null; this.parent = null\n\n        try{\n            this.parent = activeEffect\n            // \u6B64\u5904\u5F00\u59CB\u4F9D\u8D56\u6536\u96C6\uFF0C \u6838\u5FC3\u5C31\u662F\u628A\u5F53\u524D\u7684 effect \u548C \u7A0D\u540E\u6E32\u67D3\u7684 \u5C5E\u6027\u8FDB\u884C\u7ED1\u5B9A\n            activeEffect = this\n\n            // let state = { flag: true, name: '', age: 1 }\n            // effect(() => {\n            //     body.innerHTMl = state.flag ? state.name : state.age\n\n            //     setTimeout(() => {\n            //         state.flag = false\n\n            //         setTimeout(() => {\n            //             console.log('\u4FEE\u6539name\uFF0C\u539F\u5219\u4E0A\u4E0D\u66F4\u65B0')\n            //             state.name = '11'\n            //         }, 1000)\n            //     }, 1000)\n            // })\n            // \u6309\u7167\u6700\u5F00\u59CB\u7684\u5199\u6CD5 \u6761\u4EF6\u6E32\u67D3\n            // \u4E00\u5F00\u59CB effect \u53EA\u662F\u6536\u96C6\u4E86 flag \u548C name\uFF0C\u540E\u9762 flag \u53D8\u4E86\uFF0C\u6E32\u67D3\u4E86 age \u5C5E\u6027\uFF0C\u540E\u9762 name \u5728\u53D8\uFF0C\u5E94\u8BE5\u4E0D\u4F1A \u5728\u89E6\u53D1\u66F4\u65B0\n            // \u5728\u6700\u540E\u7684  state.name = '11'\uFF0C\u867D\u7136 name \u53D8\u4E86\uFF0C\u4E5F\u89E6\u53D1\u4E86 trigger \u65B9\u6CD5 (\u56E0\u4E3A name \u5C5E\u6027\u5728\u5F00\u59CB\u88AB\u4F9D\u8D56\u6536\u96C6\u4E86\uFF0C\u5728 targetMap \u91CC\u9762)\n            // \u4E5F\u89E6\u53D1\u4E86 triggerEffect\u65B9\u6CD5 \u4F46\u662F name \u5BF9\u5E94\u7684 effect \u88AB\u6E05\u7A7A\u4E86\uFF0C \u65E0\u6CD5\u6267\u884C triggerEffect \u91CC\u9762\u7684 effect.run()\n            \n            // effect\u5B9E\u5217 \u7684 deps \u6570\u7EC4 \u91CC\u9762\u5B58\u653E\u7684 \u90FD\u662F \u5404\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684 set\u96C6\u5408 (name \u5BF9\u5E94\u7684 Set \u96C6\u5408)\n            // \u6BCF\u6B21\u6267\u884C\u7528\u6237\u51FD\u6570\u4E4B\u524D\uFF0C\u6E05\u7A7A \u6B64  effect\u5B9E\u5217 \u7684 deps \u6570\u7EC4 \u91CC\u9762\u7684 \u5404\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684 set\u96C6\u5408\uFF0C \u4FDD\u8BC1\u540E\u7EED \u5C5E\u6027\u53D8\u4E86\uFF0C\u89E6\u53D1 triggerEffect\n\n            // \u9700\u8981\u5728\u6267\u884C\u7528\u6237\u51FD\u6570\u4E4B\u524D \u6E05\u7A7A\u4E4B\u524D\u7684 effect, \u9632\u6B62\u5206\u652F\u5207\u6362\u903B\u8F91\u53D8\u66F4 \u5F15\u53D1\u7684 \u91CD\u590D\u6E32\u67D3\n            cleanupEffect(this)\n\n            return this.fn() // \u6267\u884C fn\uFF0C \u62FF\u5230  activeEffect\n        }finally{\n            activeEffect = this.parent\n            this.parent = null\n        }\n    }\n\n    // \u505C\u6B62 effect \u6536\u96C6\n    stop(){\n        if(this.active){\n            this.active = false\n            cleanupEffect(this)\n        }\n    }\n}\n\n// runner.effect.fn \u62FF\u5230\u4F20\u5165\u7684 fn \u51FD\u6570\nexport const effect = (fn, options) => {\n    debugger\n    const _effect = new ReactiveEffect(fn, options?.scheduler)\n\n    _effect.run();// \u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21\n\n    // \u6B64\u5904\u4FDD\u8BC1\u53EF\u4EE5\u5728\u5916\u9762\u76F4\u63A5\u8C03\u7528 runner()\n    const runner = _effect.run.bind(_effect)\n\n    // \u6B64\u5904\u4FDD\u8BC1\u53EF\u4EE5\u5728\u5916\u9762 \u76F4\u63A5\u8C03\u7528 runner.effect.stop()\n    runner.effect = _effect;\n    return runner;\n}\n\nexport const trackEffect = (depSet) => {\n    if(activeEffect){\n        // \u53BB\u91CD\u7684\u903B\u8F91 \n        let shouldTrack = !depSet.has(activeEffect)\n        if(shouldTrack){\n            depSet.add(activeEffect)\n\n            // { obj: { xxx: new Set(effect) } }\n            // \u4E0A\u9762\u7684\u64CD\u4F5C\u53EA\u662F \u8BA9 \u5C5E\u6027\u8BB0\u5F55\u4E86 effect\uFF0C \u4E0B\u9762\u8FD9\u53E5 \u8BA9 effect\u5B9E\u5217 \u4E5F\u8BB0\u5F55 \u5C5E\u6027 \u7684 dep (\u4E92\u76F8\u8BB0\u5FC6)\n            activeEffect.deps.push(depSet) // effect\u5B9E\u5217 \u8BB0\u5F55\u4F4F dep (new Set) \n        }\n    }\n}\n\nexport const triggerEffect = (effects) => {\n    // \u6DF1\u62F7\u8D1D\u4E00\u4E0B\n    effects = new Set(effects);\n\n    effects.forEach(effect => {\n        // \u907F\u514D\u51FA\u73B0 effect \u7684 fn \u91CC\u9762\u53C8\u7EE7\u7EED\u4FEE\u6539 state\uFF0C \u9020\u6210 effect \u91CD\u590D\u6267\u884C\u95EE\u9898\n        if(effect != activeEffect){\n            if(effect.scheduler){\n                effect.scheduler()\n            }else{\n                effect.run();\n            }\n        }\n    });\n}\n\n\n// key \u53EA\u80FD\u662F \u5BF9\u8C61\nconst targetMap = new WeakMap()\n// \u4E00\u4E2A effect \u8BB0\u5F55\u591A\u4E2A \u5C5E\u6027\uFF0C \u4E00\u4E2A\u5C5E\u6027\u8BB0\u5F55\u591A\u4E2A effect\n// WeakMap = {\n    // \u5BF9\u8C61\uFF1A Map{ name: Set(), age: Set() }\n// }\n\n// \u89E3\u51B3\u4E86 \u6CA1\u6709\u5728 effect \u91CC\u9762\u6267\u884C \u4FEE\u6539\u72B6\u6001\u7684 \u95EE\u9898 (\u5224\u65AD\u6709\u6CA1\u6709 activeEffect)\nexport const track = (target, type, key) => {\n    debugger\n    // \u6CA1\u6709\u6FC0\u6D3B\u7684 effect \u4E0D\u9700\u8981\u6536\u96C6\n    // \u6CA1\u6709\u5728 effect \u4E2D\u4F7F\u7528\u7684 \u4E0D\u9700\u8981\u7BA1 \u4E0D\u9700\u8981\u6536\u96C6\n    if(!activeEffect){\n        return\n    }\n\n    let depsMap = targetMap.get(target)    \n    if(!depsMap){\n        targetMap.set(target, (depsMap = new Map()))\n    }\n\n    let depSet = depsMap.get(key)\n    if(!depSet){\n        depsMap.set(key, (depSet = new Set()))\n    }\n\n    trackEffect(depSet)\n}\n\n\n// weakMap { obj: Map{ key: Set(effect) } }\nexport const trigger = (target, type, key, value, oldValue) => {\n    debugger\n    const depsMap = targetMap.get(target)\n\n    // \u89E6\u53D1\u7684\u503C\u4E0D\u5728\u6A21\u677F\u4E2D\u4F7F\u7528, \u4E0D\u9700\u8981\u66F4\u65B0\n    // \u89E6\u53D1\u7684\u503C\u4E0D\u5728\u6A21\u677F\u4E2D\u4F7F\u7528, \u4E0D\u9700\u8981\u66F4\u65B0\n    // \u89E6\u53D1\u7684\u503C\u4E0D\u5728\u6A21\u677F\u4E2D\u4F7F\u7528, \u4E0D\u9700\u8981\u66F4\u65B0\n\n    if(!depsMap){\n        return\n    }\n\n    let effects = depsMap.get(key) // \u627E\u5230\u7684\u90FD\u662F Set effects\n\n    if(effects){\n        // \u6267\u884C Set forEach \u4E4B\u524D\uFF0C \u62F7\u8D1D\u4E00\u4EFD\u526F\u672C\u8FDB\u884C\u64CD\u4F5C\n        // \u9488\u5BF9 Set \u5148\u5220\u9664\u5143\u7D20\uFF0C\u5728\u6DFB\u52A0\u8FDB\u6765\u540C\u4E00\u4EFD\u5143\u7D20\uFF0C\u9020\u6210\u6B7B\u5FAA\u73AF\u95EE\u9898\n       \n        triggerEffect(effects)\n    }\n}", "export const isObject = (value) => {\n    return typeof value === 'object' && value !== null\n}\n\nexport const isString = (value) => {\n    return typeof value === 'string'\n}\n\nexport const isNumber = (value) => {\n    return typeof value === 'number'\n}\n\nexport const isFunction = (value) => {\n    return typeof value === 'function'\n}\n\nexport const isArray = Array.isArray\n\nexport const assign = Object.assign;\n\nexport const enum ShapeFlags {\n    ELEMENT = 1,\n    FUNCTIONAL_COMPONENT = 2,\n    STATEFUL_COMPONENT = 4,\n    TEXT_CHILDREN = 8,\n    ARRAY_CHILDREN = 16,\n    SLOTS_CHILDREN = 32,\n    TELEPORT = 64,\n    SUSPENSE = 128,\n    COMPONENT_SHOULD_KEEP_ALIVE = 256,\n    COMPONENT_KEPT_ALIVE = 512,\n    COMPONENT =  ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT // 6\n    // | \u4F4D\u8FD0\u7B97\uFF0C \u67091\u4E2A\u662F1 \u5C31\u53EF\u4EE5\u662F 1\n    // 0010 1*2*1 = 2\n    // 0100 1*2*2 = 4\n    // 0110 1*2*2 + 1*2*1 = 6\n\n    // & \u4E0E\u8FD0\u7B97\uFF0C \u4E24\u4E2A\u90FD\u662F1 \u624D\u662F 1\n    // 0010 1*2*1 = 2\n    // 0100 1*2*2 = 4\n    // 0000 0\n}", "import { reactive } from \"./index\"\nimport { isObject } from \"@vue/shared\"\nimport { activeEffect, track, trigger } from \".\"\n\nexport const baseHandler = {\n    get(target, key, receiver){\n        // \u7B2C\u4E00\u6B21 \u4EE3\u7406\u4E4B\u540E\uFF0C \u7B2C\u4E8C\u6B21\u5728\u4EE3\u7406 (\u7528\u7B2C\u4E00\u6B21\u4EE3\u7406\u6210\u529F\u4E4B\u540E\u7684 \u8FD4\u56DE\u503C\u6765\u5145\u5F53 target)\n        // \u4F1A\u89E6\u53D1 target[ReactiveFlags.IS_REACTIVE] (\u89E6\u53D1\u4E86 get)  (\u6B64\u65F6\u7684target -> \u7B2C\u4E00\u6B21\u4EE3\u7406\u6210\u529F\u4E4B\u540E\u7684 proxy)\n        // \u76F4\u63A5 \u8FD4\u56DE true\uFF0C \u8FD4\u56DE target (\u76F8\u5F53\u4E8E\u4E0A\u4E00\u6B21 proxy(target))\n        if(key === ReactiveFlags.IS_REACTIVE){\n            return true\n        }\n\n        track(target, 'get', key)\n\n        // return target[key]\n        let res = Reflect.get(target, key , receiver)\n\n        // \u6DF1\u5EA6\u4EE3\u7406\uFF0C\u53EA\u6709\u5728\u53D6\u503C \u624D\u4F1A\u51FA\u53D1 \u6DF1\u5EA6\u4EE3\u7406\uFF0C\u5426\u5219\u4E0D\u4F1A\u50CF vue2 \u76F4\u63A5\u8FDB\u884C \u6DF1\u5EA6 \u9012\u5F52\n\n        // let state = {address: { ad: '11' }}\n        // \u5F53\u51FA\u73B0 \u8BBF\u95EE \u5BF9\u8C61\u5957\u5BF9\u8C61\u7684\u5B50\u5C5E\u6027(state.address.ad), \u521D\u59CB\u5316\u4E0D\u4F1A\u4EE3\u7406\u5B50\u5BF9\u8C61 (ad \u5BF9\u8C61)\n        // \u5F53\u8BBF\u95EE \u5B50\u5BF9\u8C61\u5C5E\u6027 (\u8BBF\u95EEad, \u901A\u8FC7 state.address.ad) \u624D\u4F1A\u89E6\u53D1 reactive, \u9996\u5148\u8BBF\u95EE\u7684(state.address) \u6B64\u65F6 reactiveMap \u624D\u4F1A set ad \u5BF9\u8C61\n        // reactiveMap -> { state: proxystate, state.address: proxy state.address }\n        if(isObject(res)){\n            return reactive(res)\n        }\n        return res\n    },\n    set(target, key, value, receiver){\n        // target[key] = value\n        // return true\n        let oldValue = target[key]\n        let result = Reflect.set(target, key, value, receiver)\n\n        // \u503C\u4E00\u6837\uFF0C\u4E0D\u89E6\u53D1 \u66F4\u65B0\n        if(oldValue != value){\n            trigger(target, 'set', key, value, oldValue)\n        }\n\n        return result\n    }\n}\n\n// \u6807\u8BC6\u6709\u6CA1\u6709\u88AB \u53CD\u590Dproxy\nexport const enum ReactiveFlags {\n    IS_REACTIVE = '_v_isReactive'\n}", "import { isObject } from '@vue/shared';\nimport { baseHandler, ReactiveFlags } from './baseHandler';\n\n// 0. reactive \u53EA\u80FD\u505A \u5BF9\u8C61\u7684 \u4EE3\u7406\n// 1. \u89E3\u51B3\u4E86 \u540C\u4E00\u4E2A\u5BF9\u8C61\u88AB\u53CD\u590D \u4EE3\u7406\u7684\u95EE\u9898 (\u4F18\u5148\u67E5\u627E\u5DF2\u7ECF\u88AB\u4EE3\u7406\u7684\u7F13\u5B58)\n// 2. \u89E3\u51B3\u4E86 \u5C5E\u6027\u8BBF\u95EE\u5668\u7684\u95EE\u9898\uFF0C \u4F7F\u7528 Reflect\n// 3. \u89E3\u51B3\u4E86 \u5BF9\u8C61\u88AB\u4EE3\u7406\uFF0C \u5DF2\u7ECF\u88AB\u4EE3\u7406\u7684\u5BF9\u8C61\u53C8\u88AB\u4EE3\u7406\u7684\u95EE\u9898 (\u901A\u8FC7\u5728 get \u52A0\u4E00\u4E2A \u5C5E\u6027key)\n// 4. \u907F\u514D\u51FA\u73B0 effect \u7684 fn \u91CC\u9762\u53C8\u7EE7\u7EED\u4FEE\u6539 state\uFF0C \u9020\u6210 effect \u91CD\u590D\u6267\u884C\u95EE\u9898\n// 5. \u9488\u5BF9 Set \u5148\u5220\u9664\u5143\u7D20\uFF0C\u5728\u6DFB\u52A0\u8FDB\u6765\u540C\u4E00\u4EFD\u5143\u7D20\uFF0C\u9020\u6210\u6B7B\u5FAA\u73AF\u95EE\u9898\n// 6. \u6BCF\u6B21\u6267\u884C effect \u51FD\u6570\uFF0C\u91CD\u65B0\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\uFF0C \u5220\u9664\u4E4B\u524D\u7684\u4F9D\u8D56\u6536\u96C6\n// 7. \u6DF1\u5EA6\u4EE3\u7406\uFF0C\u53EA\u6709\u5728\u53D6\u503C \u624D\u4F1A\u51FA\u53D1 \u6DF1\u5EA6\u4EE3\u7406(\u89E6\u53D1\u4E86 get)\uFF0C\u5426\u5219\u4E0D\u4F1A\u50CF vue2 \u76F4\u63A5\u8FDB\u884C \u6DF1\u5EA6 \u9012\u5F52\n// 8. proxy \u53EA\u652F\u6301\u5BF9\u8C61\uFF0C\u6240\u4EE5\u57FA\u672C\u6570\u636E\u7C7B\u578B \u4F7F\u7528 Object.defineProperty (\u7F16\u8BD1\u540E) \u6765\u5904\u7406\n// 9. \u5728\u4F7F\u7528\u6570\u636E\u7684\u65F6\u5019\uFF0C\u90FD\u662F\u4F7F\u7528 toRefs \uFF0C\u5728\u6A21\u677F\u91CC\u9762\u4E0D\u9700\u8981\u6DFB\u52A0 .value \u76F4\u63A5\u53EF\u4EE5\u62FF\u5230\u6570\u636E\n// 10. \u9488\u5BF9 \u5185\u7F6E\u7684symbol \u5C5E\u6027\u7684key \u6216\u8005 \u8BBF\u95EE\u7684\u662F__prop__ \u5C5E\u6027\uFF0C\u76F4\u63A5\u8FD4\u56DE\uFF0C\u4E0D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n// 11. \u8FD9\u91CC\u8C03\u7528 includes \u5185\u90E8\u4F1A\u628A\u4EE3\u7406\u5BF9\u8C61\u53D8\u6210\u539F\u59CB\u5BF9\u8C61, \u5728\u8FDB\u884C\u5904\u7406 (arr.includes)\n\n// key \u53EA\u80FD\u662F \u5BF9\u8C61\nconst reactiveMap = new WeakMap()\n\n\nexport const isReactive = (val) => {\n    // \u901A\u8FC7 [ReactiveFlags.IS_REACTIVE] \u5224\u5B9A \u662F\u4E0D\u662F\u54CD\u5E94\u5F0F \u6570\u636E\n    return val && val[ReactiveFlags.IS_REACTIVE]\n}\n\n// reactive \u53EA\u80FD\u505A \u5BF9\u8C61\u7684 \u4EE3\u7406\nexport const reactive = (target) => {\n    if(!isObject(target)){\n        return\n    }\n\n    // \u89E3\u51B3 \u4EE3\u7406\u4E4B\u540E\uFF0C\u7528 \u4EE3\u7406\u7684\u5BF9\u8C61\u5728\u8FDB\u884C proxy\n    // \u6B64\u65F6 target \u5C31\u662F \u7B2C\u4E00\u6B21\u4EE3\u7406\u4E4B\u540E\u8FD4\u56DE\u7684proxy \u5BF9\u8C61\uFF0C \u89E6\u53D1\u4E86 Get \u64CD\u4F5C\n    if(target[ReactiveFlags.IS_REACTIVE]){\n        return target\n    }\n\n    // \u89E3\u51B3 \u540C\u4E00\u4E2A\u5BF9\u8C61\u88AB\u53CD\u590Dproxy\n    const exisitingProxy = reactiveMap.get(target)\n    if(exisitingProxy){\n        return exisitingProxy\n    }\n\n    // \u53D6\u503C \u89E6\u53D1\u4E86 get\uFF0C \u8D4B\u503C \u89E6\u53D1\u4E86 set\n    const proxy = new Proxy(target, baseHandler)\n    reactiveMap.set(target, proxy)\n    return proxy\n}\n\n\n\n// \u4F7F\u7528  Reflect.get(target, key , receiver)\uFF0C \u4F7F\u5F97  this.name \u7684 this \u6307\u5411 receiver (\u4EE3\u7406\u4E4B\u540E\u7684\u5BF9\u8C61) \n// \u5047\u8BBE\u76F4\u63A5\u4F7F\u7528 target[key], \u4E0B\u9762\u7684 \u6848\u5217 \u6267\u884C this.name \u7684 this \u5C31\u662F obj \u800C\u4E0D\u662F receiver\uFF0C\u65E0\u6CD5\u89E6\u53D1 name \u7684 get\nconst obj = {\n    name: '123',\n    get test(){\n        // \u4F7F\u7528 Reflect \u4FEE\u6B63\u6B64\u5904\u7684 this\n        return this.name\n    }\n}", "import { ReactiveEffect, trackEffect, triggerEffect } from \".\";\nimport { isFunction } from \"@vue/shared\"\n\nexport const computed = (getterOrOptions)=> {\n    debugger\n    let onlyGettter = isFunction(getterOrOptions)\n\n    let getter;\n    let setter;\n    if(onlyGettter){\n        getter = getterOrOptions\n        setter = () => { console.warn('no set') }\n    }else{\n        getter = getterOrOptions.get\n        setter = getterOrOptions.set\n    }\n    return new ComputedRefImpl(getter, setter)\n}\n\nclass ComputedRefImpl {\n    public effect\n    public _dirty = true// \u9ED8\u8BA4\u53D6\u503C\u65F6\u5019\u8FDB\u884C\u8BA1\u7B97\n    public _v_isReadOnly = true\n    public _v_isRef = true // \u8FD9\u4E2A\u5C5E\u6027\u4EE3\u8868\u9700\u8981\u4F7F\u7528 .value \u6765\u8BBF\u95EE\n    public _value\n    public dep = new Set()\n\n    constructor(public getter, public setter){\n        this.effect = new ReactiveEffect(getter, () => {\n            // \u4F9D\u8D56\u7684\u5C5E\u6027\u53D1\u751F\u53D8\u5316\u6267\u884C\u6B64\u8C03\u5EA6\u51FD\u6570 \u5176\u5B9E\u662F  scheduler\n            // \u503C\u4E0D\u662F\u810F, \u66F4\u65B0\n            if(!this._dirty){\n                this._dirty = true\n               \n                // \u89E6\u53D1\u66F4\u65B0\n                triggerEffect(this.dep)\n            }\n        })\n    }\n    // \u8BA1\u7B97\u5C5E\u6027 \u521B\u5EFA\u5B8C\u6210\u4E0D\u4F1A \u7ACB\u5373\u6267\u884C\uFF0C\u5F53 \u89E6\u53D1 .value \u624D\u4F1A\u6267\u884C\n    // \u7C7B\u4E2D\u7684\u5C5E\u6027\u8BBF\u95EE\u5668\uFF0C \u7F16\u8BD1\u51FA\u6765\u662F Object.defineProperty\n    get value(){\n        // \u4F9D\u8D56\u6536\u96C6\n        trackEffect(this.dep)\n        \n        // \u907F\u514D\u591A\u6B21\u53D6\u503C (\u7B2C\u4E00\u6B21\u53D6\u503C\u5B8C\u6BD5\u4E4B\u540E\uFF0C _dirty \u4E3A false\uFF0C\u518D\u6B21\u53D6\u503C\u8FDB\u4E0D\u6765\uFF0C\u76F4\u63A5\u8FD4\u56DE\u503C \u56E0\u4E3A_dirty \u4E3A false)\n        if(this._dirty){ // \u503C\u662F\u810F\u7684\uFF0C\u9700\u8981\u91CD\u65B0\u8FD0\u884C\n            this._value = this.effect.run() // \u8C03\u7528 run \u6267\u884C getter \u51FD\u6570\n            this._dirty = false // \u53D6\u5B8C\u503C\uFF0C\u53D8\u6210false\uFF0C \u503C\u662F\u5E72\u51C0\u7684\uFF0C\u4E0D\u9700\u8981\u91CD\u65B0\u53D6\u503C\n        }\n        return this._value\n    }\n\n    set value(newVal){\n        this.setter(newVal)\n    }\n}\n\n// 0. _dirty \u89C4\u907F\u4E86\u591A\u6B21\u53D6\u503C\uFF0C\u53CD\u590D\u8FD0\u7B97\u7684\u73B0\u8C61  get value() \u91CC\u9762\n\n\n// 1. \u521D\u59CB\u5316 computed \u6CA1\u6709\u6267\u884C\u903B\u8F91\n// 2. \u5F53\u53D6\u503C computed.value \u65F6\u5019 (\u5728\u6E32\u67D3 effect \u91CC\u9762), \u89E6\u53D1\u4E86 get value()\n// 3. \u6267\u884C trackEffect \u6B64\u65F6 this.dep.add(activeEffect -> \u6E32\u67D3 effect) \u76F8\u5F53\u4E8E computed.dep.add(activeEffect -> \u6E32\u67D3 effect)\n\n// 4. \u4E4B\u540E\u6267\u884C computed.effect.run() \u53BB \u53D6\u503C\uFF0C \u6267\u884C  computed \u4F20\u5165\u7684 getter \u51FD\u6570\u3002 \u6B64\u65F6 activeEffect -> computed effect\n// \u53D6\u503C\u7684\u8FC7\u7A0B\u4E2D name \u5C5E\u6027 \u5173\u8054\u4E86 Set\uFF0C Set \u91CC\u9762 activeEffect (computed effect)\n\n// 5. state2.name = '123test' \u7ED9state2.name \u8D4B\u503C\u4E86\u65B0\u503C\uFF0C \u89E6\u53D1\u4E86 new Proxy \u7684 set \u7684 trigger\n// 6. \u5728targetMap \u91CC\u9762\u627E\u5230\u4E86 name \u5BF9\u5E94\u7684 set \u96C6\u5408\uFF0C \u91CC\u9762\u5B58\u8D2E\u4E86 name \u7684 effect (\u4E5F\u5C31\u662F computed effect)\n// 7. \u89E6\u53D1 triggerEffect (name \u5BF9\u5E94 \u7684 set \u91CC\u9762\u5B58\u7684\u662F computed effect) \u8BA9 computed effect \u6267\u884C\u4ED6\u7684 scheduler\n// 8. \u5728 computed effect \u7684 scheduler \u91CC\u9762\u6267\u884C triggerEffect (dep.effect \u5176\u5B9E\u662F\u6E32\u67D3 effect \u6267\u884C\u6E32\u67D3) \u5173\u8054\u6B65\u9AA43\n// this.dep \u5BF9\u5E94\u7684\u662F  computed.dep\n\n// 9. \u91CD\u65B0\u89E6\u53D1 \u6E32\u67D3 effect\u53D6\u503C -> compued getter \u6267\u884C\n\n\n\n\n\n// \u6E32\u67D3 effect -> computed effect \u7684 dep \u8BB0\u5F55\u4E86 \u6E32\u67D3 effect -> computed effect -> computed efect.scheduler() -> \u6E32\u67D3 effect.run()\n// \u53D6\u503C\u7684\u8FC7\u7A0B\u4E2D name \u5C5E\u6027 \u5173\u8054\u4E86 Set\uFF0C Set \u91CC\u9762 activeEffect (computed effect)\n// state2.name = '123test' \u7ED9state2.name \u8D4B\u503C\u4E86\u65B0\u503C\uFF0C \u89E6\u53D1\u4E86 new Proxy \u7684 set \u7684 trigger\n// \u6267\u884C computed effect \u7684 scheduler()  \u4E4B\u540E\u89E6\u53D1  scheduler \u91CC\u9762\u6267\u884C triggerEffect()\n// \u6267\u884C\u4E86 \u6E32\u67D3effect.run() \u91CD\u65B0\u6267\u884C \u6E32\u67D3\u903B\u8F91", "import { isFunction, isObject } from \"@vue/shared\"\nimport { ReactiveEffect, isReactive } from \".\"\n\n// vue3 \u7684 watch \u81EA\u5E26\u6E05\u7406\u51FD\u6570\n\n// \u8003\u8651\u5BF9\u8C61\u4E2D\u5FAA\u73AF\u5F15\u7528\u7684\u95EE\u9898\nconst traversal = (value, set = new Set()) => {\n    if(!isObject(value)) return value\n\n    // \u5904\u7406\u5FAA\u73AF\u5F15\u7528\u95EE\u9898\n    if(set.has(value)){\n        return value\n    }\n\n    set.add(value)    \n    for (const key in value) {\n        traversal(value[key], set)\n    }\n\n    return value\n}\n\n\n// source \u7528\u6237\u4F20\u5165\u7684\u6570\u636E\n// \u4F7F\u7528 watch \u5C3D\u91CF \u4F7F\u7528 \u4F20\u5165\u51FD\u6570\uFF0C\u907F\u514D \u9012\u5F52\n// watch \u7B2C\u4E00\u4E2A\u53C2\u6570\u9700\u8981\u662F\u54CD\u5E94\u5F0F\u7684\u6570\u636E     \u6240\u4EE5\u9700\u8981 \u5224\u5B9A \u662F\u4E0D\u662F\u54CD\u5E94\u5F0F \u6570\u636E\nconst doWatch = (source, cb, { immediate } = {} as any) => {\n    let getter\n    if(isReactive(source)){\n        // \u672C\u8D28\u4E0A\u6DF1\u5EA6\u76D1\u542C\n        // \u5BF9\u7528\u6237\u4F20\u5165\u7684\u6570\u636E \u8FDB\u884C \u9012\u5F52\u5FAA\u73AF\n        // \u53EA\u8981\u5FAA\u73AF\u5C31\u4F1A\u8BBF\u95EE\u5BF9\u8C61\u4E0A\u7684\u6BCF\u4E00\u4E2A\u5C5E\u6027, \u8BBF\u95EE\u5C5E\u6027\u7684\u65F6\u5019\u4F1A\u6536\u96C6 effect\n        getter = () => traversal(source)\n\n        // \u8FD9\u6837\u5B50\u5199 \u4E0D\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\uFF0C\u53EA\u662F\u8BBF\u95EE\u4E86\u5F53\u524D\u8FD9\u4E2A\u5BF9\u8C61\n        // getter = () => source\n\n    }else if(isFunction(source)){\n        getter = source\n    }\n\n    let cleanup\n    const onCleanup = (fn) => {\n        cleanup = fn // \u4FDD\u5B58\u7528\u6237\u7684\u51FD\u6570\n    }\n    let oldValue\n\n    const job = () => {\n        // \u4F20\u5165 cb \u7684\u60C5\u51B5\u4E0B \u662F watch\n        // \u4E0D\u4F20\u5165 \u4EE3\u8868 watchEffect\n\n        // watch \u662F \u4E00\u4E2A effect + \u81EA\u5B9A\u4E49\u7684 scheduler\n        // watchEffect \u662F\u4E00\u4E2A effect\n        if(cb){\n            if(cleanup){\n                cleanup() // \u4E0B\u4E00\u6B21\u6267\u884C\u7684\u65F6\u5019\u89E6\u53D1\u4E0A\u4E00\u6B21\u7684 watch \u7684\u6E05\u7406\n            }\n            const newValue = _effect.run()\n            // \u7B2C\u4E00\u6B21 cb \u4E0D\u6267\u884C\uFF0ConCleanup \u5C31\u4E0D\u4F1A\u6267\u884C\uFF0Ccleanup \u5C31\u6CA1\u6709\u8D4B\u503C\u6210\u529F\n            cb(newValue, oldValue, onCleanup)\n    \n            oldValue = newValue\n        }else{\n            // else \u7684\u60C5\u51B5\u662F watchEffect \u7684 case\n            // \u8C03\u7528 run \u662F\u6267\u884C\u6E05\u7406 \u4E4B\u540E  \u5728\u89E6\u53D1\u6536\u96C6 (\u6CA1\u6709\u76F4\u63A5\u8C03\u7528 getter \u7684\u539F\u56E0)\n            _effect.run()\n        }\n    }\n    const _effect = new ReactiveEffect(getter, job) // \u76D1\u63A7\u81EA\u5DF1\u6784\u9020\u7684\u51FD\u6570\uFF0C\u53D8\u5316\u4E4B\u540E\u91CD\u65B0\u6267\u884C job\n\n\n    if(immediate){\n        return job()\n    }\n\n    oldValue =  _effect.run()\n}\n\n\n\nexport const watch = (source, cb, options) => {\n    doWatch(source, cb, options)\n}\n\n// 1. \u521D\u59CB\u5316\u5148\u6267\u884C\u4E00\u6B21 \u62FF\u5230 oldValue\n// 2. \u6B64\u65F6 activeEffect = watchEffect\n// 3. \u89E6\u53D1\u4E86_effect.run()\uFF0C\u53D6\u503C\u7684\u8FC7\u7A0B\u4E2D name \u5C5E\u6027 \u5173\u8054\u4E86 Set\uFF0C Set \u91CC\u9762 activeEffect (watch effect)\n// 4. \u540E\u9762 name \u6539\u4E86\uFF0C\u89E6\u53D1\u4E86 watch effect \u7684 scheduler()\n// 5. \u6267\u884C\u4E86 job\n\nexport const watchEffect = (source, options) => {\n    doWatch(source ,null, options)\n}\n\n// watch \u672C\u8EAB\u5C31\u662F \u4E00\u4E2A effect + \u81EA\u5B9A\u4E49\u7684 scheduler\n// watchEffect \u662F effect \n// \u6709 watchEffect\uFF0C\u6709\u65F6\u5019\u4E0D\u9700\u8981\u660E\u786E\u5199 \u4F9D\u8D56\u9879\n\n// vue3 \u7684 watch \u81EA\u5E26\u6E05\u7406\u51FD\u6570\n\n\n// \u95ED\u5305\uFF1A \u5B9A\u4E49\u7684\u4F5C\u7528\u57DF\u548C\u6267\u884C\u4F5C\u7528\u57DF\u4E0D\u662F\u540C\u4E00\u4E2A", "import { reactive, triggerEffect, trackEffect } from \".\"\nimport { isArray, isObject } from \"@vue/shared\"\n\nexport const ref = (value) => {\n    return new RefImpl(value)\n}\n\n// proxy \u53EA\u652F\u6301\u5BF9\u8C61\uFF0C\u6240\u4EE5\u57FA\u672C\u6570\u636E\u7C7B\u578B \u4F7F\u7528 Object.defineProperty \u6765\u5904\u7406\nclass RefImpl {\n    public _value\n    public _v_isRef = true\n    public dep = new Set\n    constructor(public rowValue){\n        this._value = toReactive(rowValue)\n    }\n\n    // \u7C7B\u4E2D\u7684\u5C5E\u6027\u8BBF\u95EE\u5668\uFF0C \u7F16\u8BD1\u51FA\u6765\u662F Object.defineProperty\n    get value(){\n        trackEffect(this.dep)\n        return this._value\n    }\n    set value(newValue){\n        // \u89E6\u53D1\u66F4\u65B0\n        if(this.rowValue !== newValue){\n            this._value = toReactive(newValue)\n            this.rowValue = newValue\n            triggerEffect(this.dep)\n        }\n    }\n}\n\n\n\nfunction toReactive(value){\n    return isObject(value) ? reactive(value) : value\n}\n\n\n\n\n\n// \u4E3A\u4E86\u5B9E\u73B0 \u89E3\u6784\u8BED\u6CD5\uFF0C\u8FD8\u80FD\u7EE7\u7EED\u4F7F\u7528\n// toRefs \u53EA\u80FD\u5904\u7406\u5BF9\u8C61\nexport function toRefs(value){\n    const result = isArray(value) ? new Array(value.length) : {}\n\n    for(let key in value){\n        result[key] = toRef(value, key)\n    }\n    return result\n}\n\nexport function toRef(object, key){\n    return new ObjectRefImpl(object, key)\n}\n\n// \u5C5E\u6027\u8BBF\u95EE\u5668 \u7F16\u8BD1\u51FA\u6765\u53D8\u6210 Object.defineProperty\n// \u53EA\u662F\u628A .value \u5C5E\u6027 \u4EE3\u7406\u5230\u539F\u6765\u7684 \u5BF9\u8C61\u4E0A\u9762\nclass ObjectRefImpl{\n    __v_isRef = true\n    constructor(public object, public key){}\n    get value(){\n        return this.object[this.key]\n    }\n    set value(newValue){\n        this.object[this.key] = newValue\n    }\n}\n\nexport const proxyRefs = (object) => {\n    return new Proxy(object, {\n        get(target, key, recevier){\n            const r = Reflect.get(target, key, recevier)\n\n            return r._v_isRef ? r.value : r;\n        },\n        set(target, key, value, recevier){\n            let oldValue = target[key]\n            if(oldValue._v_isRef){\n                oldValue.value = value\n                return true\n            }else{\n                // \u89E6\u53D1 \u6E90\u5BF9\u8C61\u7684 set\n                return Reflect.set(target, key, value, recevier)\n            }\n        }\n    })\n}"],
  "mappings": "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",
  "names": []
}
