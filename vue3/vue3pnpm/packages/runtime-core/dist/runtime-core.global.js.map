{
  "version": 3,
  "sources": ["../src/index.ts", "../src/render.ts", "../../shared/src/index.ts", "../src/vnode.ts", "../src/h.ts"],
  "sourcesContent": ["export * from './render'\nexport * from './h'", "export const createRenderer = (renderOptions) => {\n\n    const {\n        insert: hostInsert,\n        // \u5220\u9664\u8282\u70B9\n        remove: hostRemove,\n        // \u6587\u672C\u8282\u70B9\n        // \u5143\u7D20\u8282\u70B9\u52A8\u6001\u53D8\u66F4\n        setElementText: hostSetElementText,\n        setText: hostSetText,\n        querySelector: hostQuerySelector,\n        parentNode: hostParentNode,\n        nextSibiling: hostNextSibiling,\n        createElement: hostCreateElement,\n        createText: hostCreateText,\n    } = renderOptions;\n\n    const mountElement = (vnode, container) => {\n        debugger\n        // vue2 \u662F tag, vue3 \u662F type\n        let { type, props, } = vnode\n\n        // \u628A \u771F\u5B9E\u7684 dom \u8282\u70B9\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A\uFF0C \u540E\u7EED\u7528\u4E8E\u590D\u7528\u8282\u70B9\n        let el = vnode.el = hostCreateElement(type)\n        hostInsert(el, container)\n    }\n\n    const patch = (oldValue, newVnode, container) => {\n        console.log(oldValue, newVnode)\n        if(oldValue === newVnode) return\n\n        if(oldValue == null){\n            // \u521D\u6B21\u6E32\u67D3\n            mountElement(newVnode, container)\n        }else{\n            // \u66F4\u65B0\u6D41\u7A0B\n        }\n    }\n\n    const render = (vnode, container) => {\n        // console.log(vnode, container)\n\n        if(vnode == null){\n            // \u5378\u8F7D\u903B\u8F91\n        }else{\n            // \u65E2\u6709\u521D\u59CB\u5316\uFF0C\u4E5F\u6709\u66F4\u65B0\u7684\u903B\u8F91\n            patch(container._vnode || null, vnode, container)\n        }\n        // \u521D\u59CB\u5316\u7684\u65F6\u5019\uFF0Cpatch \u4F20\u5165\u7684\u662Fnull\uFF0C\u6267\u884C\u5B8C\u6210\u4E4B\u540E\uFF0C\u5728 container \u4E0A\u6302\u8F7D _vnode\n        // \u7B2C\u4E8C\u6B21\u6E32\u67D3\u7684\u65F6\u5019\uFF0C\u4F20\u5165\u4E0A\u6B21\u7684 vnode(container._vnode) \u548C \u8FD9\u6B21\u7684 vnode \u8FDB\u884C\u5BF9\u6BD4\uFF0C\u540C\u65F6\u66F4\u65B0 container._vnode \u4E3A\u540E\u7EED\u6E32\u67D3\u670D\u52A1\n        container._vnode = vnode\n    }\n    return {\n        render\n    }\n}", "export const isObject = (value) => {\n    return typeof value === 'object' && value !== null\n}\n\nexport const isString = (value) => {\n    return typeof value === 'string'\n}\n\nexport const isNumber = (value) => {\n    return typeof value === 'number'\n}\n\nexport const isFunction = (value) => {\n    return typeof value === 'function'\n}\n\nexport const isArray = Array.isArray\n\nexport const assign = Object.assign;\n\nexport const enum ShapeFlags {\n    ELEMENT = 1,\n    FUNCTIONAL_COMPONENT = 2,\n    STATEFUL_COMPONENT = 4,\n    TEXT_CHILDREN = 8,\n    ARRAY_CHILDREN = 16,\n    SLOTS_CHILDREN = 32,\n    TELEPORT = 64,\n    SUSPENSE = 128,\n    COMPONENT_SHOULD_KEEP_ALIVE = 256,\n    COMPONENT_KEPT_ALIVE = 512,\n    COMPONENT =  ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT // 6\n    // \u4F4D\u8FD0\u7B97\uFF0C \u67091\u4E2A\u662F1 \u5C31\u53EF\u4EE5\u662F 1\n    // 0010 1*2*1 = 2\n    // 0100 1*2*2 = 4\n    // 0110 1*2*2 + 1*2*1 = 6\n\n    // \u4E0E\u8FD0\u7B97\uFF0C \u4E24\u4E2A\u90FD\u662F1 \u624D\u662F 1\n    // 0010 1*2*1 = 2\n    // 0100 1*2*2 = 4\n    // 0000 0\n}", "import { isArray, isString, ShapeFlags } from \"@vue/shared\"\n\nexport const createVnode = (type, props, children = null) => {\n    // \u7EC4\u5408\u65B9\u6848 shapeFlag\n    let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0\n\n    const vnode = {\n        _v_isVnode: true,\n        shapeFlag,\n        type,\n        props,\n        children,\n        key: props?.key,\n        el: null, // \u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684 \u771F\u5B9E\u7684\u8282\u70B9 \uFF0C \u670D\u52A1\u4E8E\u540E\u7EED diff \u7B97\u6CD5\n    }\n    // \u7528\u65B0\u7684 props \u66F4\u65B0\u8001\u7684 vnode.props \u4E4B\u540E\uFF0C\u5728\u6279\u91CF\u66F4\u65B0\u5230 vnode.el \u4E0A\u9762\n    // const newVode = {props: 'xx', el: 'xx'}\n    // const oldVode = {props: 'yy', el: 'yy'}\n\n    if(children){\n        let type = 0\n        if(isArray(children)){\n            type = ShapeFlags.ARRAY_CHILDREN\n        }else{\n            children = String(children)\n            type = ShapeFlags.TEXT_CHILDREN\n        }\n\n        vnode.shapeFlag = vnode.shapeFlag | type\n        // vnode.shapeFlag |= type\n    }\n    return vnode\n}\n\n\nexport const isVnode = (value) => {\n    return !!(value && value._v_isVnode)\n}   ", "import { isArray } from '@vue/shared'\nimport { createVnode, isVnode } from './vnode'\n\n// \u6700\u7EC8 h \u521B\u5EFA\u51FA\u6765\u7684 children \u5C31\u4E24\u79CD\u60C5\u51B5\uFF0C \u4E00\u79CD\u662F \u6587\u672C\uFF0C \u4E00\u79CD\u662F \u6570\u7EC4\nexport const h = function(type, propsOrChinlren, children){\n    const l = arguments.length\n\n    // h('div', { style: { color: 'red' } })\n    // h('div', h('span'))\n    // h('div', [h('span'), h('span')])\n    // h('div', 'xxx') // \u6587\u672C\u4E0D\u9700\u8981\u5305\u88C5\n    if(l === 2){\n        if(isArray(propsOrChinlren)){\n            return createVnode(type, null, propsOrChinlren)\n        }else{\n            if(isVnode(propsOrChinlren)){\n                return createVnode(type, null, [propsOrChinlren])\n            }\n            return createVnode(type, propsOrChinlren)\n        }\n    }else{\n        // debugger\n        let child = [];\n        if(l > 3){\n            child = Array.from(arguments).slice(2)\n        }else if(l === 3 && isVnode(children)){\n            // \u7B49\u4E8E3\u4E2A\u7684\u60C5\u51B5\n            child = [children]\n        }else{\n            // \u6587\u672C\u8282\u70B9\n            child = children\n        }\n        // \u5176\u4ED6\u60C5\u51B5\n\n        return createVnode(type, propsOrChinlren, child)\n    }\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,MAAM,iBAAiB,CAAC,kBAAkB;AAE7C,UAAM;AAAA,MACF,QAAQ;AAAA,MAER,QAAQ;AAAA,MAGR,gBAAgB;AAAA,MAChB,SAAS;AAAA,MACT,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,eAAe;AAAA,MACf,YAAY;AAAA,QACZ;AAEJ,UAAM,eAAe,CAAC,OAAO,cAAc;AACvC;AAEA,UAAI,EAAE,MAAM,UAAW;AAGvB,UAAI,KAAK,MAAM,KAAK,kBAAkB,IAAI;AAC1C,iBAAW,IAAI,SAAS;AAAA,IAC5B;AAEA,UAAM,QAAQ,CAAC,UAAU,UAAU,cAAc;AAC7C,cAAQ,IAAI,UAAU,QAAQ;AAC9B,UAAG,aAAa;AAAU;AAE1B,UAAG,YAAY,MAAK;AAEhB,qBAAa,UAAU,SAAS;AAAA,MACpC,OAAK;AAAA,MAEL;AAAA,IACJ;AAEA,UAAM,SAAS,CAAC,OAAO,cAAc;AAGjC,UAAG,SAAS,MAAK;AAAA,MAEjB,OAAK;AAED,cAAM,UAAU,UAAU,MAAM,OAAO,SAAS;AAAA,MACpD;AAGA,gBAAU,SAAS;AAAA,IACvB;AACA,WAAO;AAAA,MACH;AAAA,IACJ;AAAA,EACJ;;;ACnDO,MAAM,WAAW,CAAC,UAAU;AAC/B,WAAO,OAAO,UAAU;AAAA,EAC5B;AAUO,MAAM,UAAU,MAAM;;;ACdtB,MAAM,cAAc,CAAC,MAAM,OAAO,WAAW,SAAS;AAEzD,QAAI,YAAY,SAAS,IAAI,IAAI,kBAAqB;AAEtD,UAAM,QAAQ;AAAA,MACV,YAAY;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,+BAAO;AAAA,MACZ,IAAI;AAAA,IACR;AAKA,QAAG,UAAS;AACR,UAAI,QAAO;AACX,UAAG,QAAQ,QAAQ,GAAE;AACjB,gBAAO;AAAA,MACX,OAAK;AACD,mBAAW,OAAO,QAAQ;AAC1B,gBAAO;AAAA,MACX;AAEA,YAAM,YAAY,MAAM,YAAY;AAAA,IAExC;AACA,WAAO;AAAA,EACX;AAGO,MAAM,UAAU,CAAC,UAAU;AAC9B,WAAO,CAAC,CAAE,UAAS,MAAM;AAAA,EAC7B;;;ACjCO,MAAM,IAAI,SAAS,MAAM,iBAAiB,UAAS;AACtD,UAAM,IAAI,UAAU;AAMpB,QAAG,MAAM,GAAE;AACP,UAAG,QAAQ,eAAe,GAAE;AACxB,eAAO,YAAY,MAAM,MAAM,eAAe;AAAA,MAClD,OAAK;AACD,YAAG,QAAQ,eAAe,GAAE;AACxB,iBAAO,YAAY,MAAM,MAAM,CAAC,eAAe,CAAC;AAAA,QACpD;AACA,eAAO,YAAY,MAAM,eAAe;AAAA,MAC5C;AAAA,IACJ,OAAK;AAED,UAAI,QAAQ,CAAC;AACb,UAAG,IAAI,GAAE;AACL,gBAAQ,MAAM,KAAK,SAAS,EAAE,MAAM,CAAC;AAAA,MACzC,WAAS,MAAM,KAAK,QAAQ,QAAQ,GAAE;AAElC,gBAAQ,CAAC,QAAQ;AAAA,MACrB,OAAK;AAED,gBAAQ;AAAA,MACZ;AAGA,aAAO,YAAY,MAAM,iBAAiB,KAAK;AAAA,IACnD;AAAA,EACJ;",
  "names": []
}
